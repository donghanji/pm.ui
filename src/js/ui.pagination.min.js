/*
   pm.build.js ,version 1.2.1 ,updated on 2016-03-07
   module for Plugins Modules library.

   https://github.com/donghanji/pm
 */

!function(){if(void 0===module.declare)throw"There is no global module.declare method!";var a=module.globals("$"),b={ellipsis:"...","...":"ellipsis"};module.declare("ui.pagination",[a],function(c){function d(a){if(a=a||{},a.el){this.$el=e(a.el),this.previous=this.current=a.current||1,this.pages=a.pages||5,this.sizes=a.sizes||0,this.totals=Math.ceil((a.totals||5)/this.pages),this.pagination=a.pagination||"<li><a>{pagination}</a></li>",this.callback=a.callback,this.etype=a.etype||"",this.ellipsis=a.ellipsis===!1?!1:!0,this.arr=[],this.arr.length=this.totals;for(var b=0,c=this.arr.length;c>b;b++)this.arr[b]=b+1;this.$prev=this.$el.find(">li.prev")||this.$el.find(">li.first"),this.pageto();var d=this,f=function(a){var b=e(a.target),c=b.parent();if(!(c.hasClass("ellipsis")||c.hasClass("disabled")||c.hasClass("active")))return"pagination"===c.attr("data-role")?(d.current=parseInt(c.text()),d.pageto(d.current)):c.hasClass("first")?(d.current=1,d.pageto(d.current)):c.hasClass("prev")?(d.current--,d.pageto(d.current)):c.hasClass("next")?(d.current++,d.pageto(d.current)):c.hasClass("last")?(d.current=d.totals,d.pageto(d.current)):void 0};"bind"===this.etype?this.$el.bind("click",f):this.$el[0].onclick=f}}var e=c(a);return d.prototype={pageto:function(){this.$el.find(">li").removeClass("disabled"),this.created&&this.callback&&this.callback(this.current),this.current<=1&&(this.current=1,this.$el.find(">li.first,>li.prev").addClass("disabled")),this.current>=this.totals&&(this.current=this.totals,this.$el.find(">li.last,>li.next").addClass("disabled"));var a=this.$el.find(">li:not(.first,.prev,.next,.last)");return a.removeClass("active"),0===this.sizes?a.remove():(this.sizes=this.sizes<3?3:this.sizes,this.totals<this.sizes?this.created?a.eq(this.current-1).addClass("active"):this.createEl(this.arr,a):void this.create(a))},create:function(a){var b=[].concat(this.arr),c=Math.floor(this.sizes/2),d=this.current-c,e=d?this.current+c:this.sizes;if(this.ellipsis){var f=d-2,g=this.totals-(e+1);b[0]=1,b[b.length-1]=this.totals,f>0&&(this.totals-f<this.sizes&&(f=this.current-c-2),b.splice(1,f,"ellipsis"),e=e-f+1),g>0&&b.splice(e,g,"ellipsis")}else{var f=d-1,g=this.totals-e;b[0]=1,f>0&&(this.totals-f<this.sizes&&(f=this.current-c-2),b.splice(0,f),e-=f),g>0&&b.splice(e,g)}this.createEl(b,a)},createEl:function(a,c){var d=e("<ul/>"),f=0,g=a.length;for(c=c||this.$el.find(">li:not(.first,.prev,.next,.last)"),c.remove();g>f;f++){var h=a[f]||"";h=b[h]||h;var i=e(this.pagination.replace(/{pagination}/g,h)).attr("data-role","pagination").addClass(b[h]||"").attr("data-index",h);d.append(i)}var j=d.children();this.$prev.after(j),this.$el.find('[data-index="'+this.current+'"]').addClass("active"),this.created=!0}},{load:function(a){return new d(a)}}})}();