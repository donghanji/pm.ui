!function(){if(void 0===module.declare)throw"There is no global module.declare method!";var a=module.globals("$");module.declare("ui.pagination",[a],function(b){function c(a){if(a=a||{},a.el){this.$el=d(a.el),this.previous=this.current=a.current||1,this.totals=a.totals||5,this.pages=a.pages||0,this.pagination=a.pagination||"<li><a>{pagination}</a></li>",this.callback=a.callback;var b=a.ellipsis===!1?!1:!0;this.create=b?this.ellipsis:this.normal,this.$prev=this.$el.find(">li.prev")||this.$el.find(">li.first"),this.pageto(this.current);var c=this;this.$el.bind("click",function(a){var b=d(a.target),e=b.parent();if(!(e.hasClass("ellipsis")||e.hasClass("disabled")||e.hasClass("active")))return"pagination"===e.attr("data-role")?(c.current=parseInt(e.text()),c.pageto(c.current)):e.hasClass("first")?(c.current=1,c.pageto(c.current)):e.hasClass("prev")?(c.current--,c.pageto(c.current)):e.hasClass("next")?(c.current++,c.pageto(c.current)):e.hasClass("last")?(c.current=c.totals,c.pageto(c.current)):void 0})}}var d=b(a);return c.prototype={pageto:function(){this.$el.find(">li").removeClass("disabled"),this.created&&this.callback&&this.callback(this.current),this.current<=1&&(this.current=1,this.$el.find(">li.first,>li.prev").addClass("disabled")),this.current>=this.totals&&(this.current=this.totals,this.$el.find(">li.last,>li.next").addClass("disabled"));var a=this.$el.find(">li:not(.first,.prev,.next,.last)");return a.removeClass("active"),0===this.pages?a.remove():this.totals<=this.pages?this.created?a.eq(this.current-1).addClass("active"):this.create(this.totals):(this.create(this.pages,a),void 0)},normal:function(a,b){var c=0,e=this.current,f=1,g=d("<ul/>"),h=Math.ceil(this.pages/2);if(this.totals>this.pages&&(this.totals-this.current<h?(f=this.totals-this.pages+1,e=this.pages-(this.totals-this.current)):this.current>h&&(f=this.current-h+1,e=h)),b=b||this.$el.find(">li:not(.first,.prev,.next,.last)"),f=0>=f?1:f,this.previous!==f&&(this.created=!1),this.created)return b.eq(e-1).addClass("active");for(b.remove(),this.previous=f;a>c;c++){var i=d(this.pagination.replace(/{pagination}/g,f++)).attr("data-role","pagination");g.append(i)}var j=g.children();this.$prev.after(j),j.eq(e-1).addClass("active"),this.created=!0},ellipsis:function(a,b){if(!(this.totals>this.pages))return this.normal(this.totals);a-=4,a=3>a?3:a,a=0===a%2?a+1:a;var c=0,e=this.current,f=Math.floor(a/2);index=1,$ul=d("<ul/>"),b=b||this.$el.find(">li:not(.first,.prev,.next,.last)");var g=d(this.pagination.replace(/{pagination}/g,"...")).attr("data-role","pagination").addClass("ellipsis");if(this.current-f>2&&(index=this.current-f,e=f+3),this.current-f>=this.totals-a+1&&(index=this.totals-a+1),this.current+f>this.totals-2&&(e=3+this.current-index),this.previous!==index&&(this.created=!1),this.created)return b.eq(e-1).addClass("active");for(b.remove(),this.current-f>2&&($ul.append(d(this.pagination.replace(/{pagination}/g,1)).attr("data-role","pagination")),$ul.append(g)),index=0>=index?1:index,this.previous=index;a>c;c++){var h=d(this.pagination.replace(/{pagination}/g,index++)).attr("data-role","pagination");$ul.append(h)}this.current+f<=this.totals-2&&$ul.append(g.clone()),this.current+f<=this.totals-1&&$ul.append(d(this.pagination.replace(/{pagination}/g,this.totals)).attr("data-role","pagination"));var i=$ul.children();this.$prev.after(i),i.eq(e-1).addClass("active"),this.created=!0}},{load:function(a){return new c(a)}}})}();